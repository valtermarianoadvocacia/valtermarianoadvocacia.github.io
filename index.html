<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Valter Mariano Sociedade Individual de Advocacia</title>
  <meta name="description" content="Site institucional e blog jurídico informativo." />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+3:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --azul:#0B1F3B;
      --azul2:#07162A;
      --ouro:#C5A059;
      --branco:#FFFFFF;
      --texto:#EDEFF5;
      --muted:#B9C0D0;
      --card:#0E2749;
      --borda:rgba(197,160,89,.28);
      --shadow:0 16px 40px rgba(0,0,0,.45);
      --radius:16px;
      --max:1100px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family:'Source Sans 3', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: radial-gradient(900px 500px at 50% 0%, rgba(197,160,89,.10), transparent 60%), var(--azul2);
      color:var(--texto);
      line-height:1.6;
    }
    a{ color:inherit; }
    .wrap{ max-width:var(--max); margin:0 auto; padding:0 18px; }

    header{
      padding: 34px 0 20px;
      border-bottom:1px solid var(--borda);
      background: linear-gradient(180deg, rgba(11,31,59,.85), rgba(7,22,42,1));
    }
    .banner{
      width:min(820px,100%);
      height:auto;
      border-radius: var(--radius);
      border: 1px solid var(--borda);
      box-shadow: var(--shadow);
      display:block;
      margin: 0 auto 14px;
      background:#08172a;
    }
    .who{
      text-align:center;
      color:var(--muted);
      margin:0;
      font-size: 15px;
    }

    nav{
      position:sticky;
      top:0;
      z-index:50;
      background: rgba(7,22,42,.92);
      backdrop-filter: blur(10px);
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    nav .wrap{
      display:flex;
      justify-content:center;
      gap:26px;
      padding: 12px 18px;
    }
    nav a{
      text-decoration:none;
      text-transform:uppercase;
      letter-spacing:.5px;
      font-weight:700;
      font-size: 13px;
      color:var(--texto);
    }
    nav a:hover{ color:var(--ouro); }

    section{ padding: 34px 0; }
    h2{
      margin:0 0 10px;
      color: var(--ouro);
      letter-spacing:.2px;
    }
    .muted{ color:var(--muted); }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 18px;
      margin-top: 16px;
    }
    .card{
      background: linear-gradient(180deg, rgba(14,39,73,.92), rgba(10,31,59,.92));
      border:1px solid rgba(255,255,255,.08);
      border-left:4px solid var(--ouro);
      border-radius: 14px;
      padding: 16px;
      box-shadow: 0 10px 22px rgba(0,0,0,.22);
      transition: transform .18s ease;
    }
    .card:hover{ transform: translateY(-3px); }
    .date{ font-size: 13px; color: rgba(185,192,208,.85); }
    .title{ margin:6px 0 8px; font-size: 17px; font-weight:800; color: var(--texto); }
    .excerpt{ margin:0; color: var(--muted); }
    .tags{ margin-top: 10px; display:flex; flex-wrap:wrap; gap:8px; }
    .tag{
      font-size:12px;
      padding: 2px 10px;
      border-radius: 999px;
      border:1px solid var(--borda);
      color: var(--muted);
    }

    .btns{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 14px; }
    .btn{
      display:inline-block;
      padding: 10px 14px;
      border-radius: 12px;
      border:1px solid rgba(197,160,89,.55);
      text-decoration:none;
      font-weight:800;
      letter-spacing:.2px;
    }
    .btn:hover{ color:var(--ouro); border-color:var(--ouro); }
    .btn--solid{
      background: rgba(197,160,89,.12);
    }

    footer{
      padding: 26px 0 40px;
      border-top:1px solid rgba(255,255,255,.10);
      background: #061225;
    }
    .legal{
      margin-top: 14px;
      font-size: 13px;
      color: rgba(185,192,208,.85);
      border-top:1px solid rgba(255,255,255,.10);
      padding-top: 14px;
    }
  </style>
</head>

<body>
<header>
  <div class="wrap">
    <img class="banner" src="assets/img/banner.jpg" alt="Valter Mariano Sociedade Individual de Advocacia — logomarca">
    <p class="who">Dr. Valter Mariano Silva Pereira · OAB/DF 85.673</p>
  </div>
</header>

<nav>
  <div class="wrap">
    <a href="#inicio">Início</a>
    <a href="blog/">Blog</a>
    <a href="#contato">Contato</a>
  </div>
</nav>

<main class="wrap">
  <section id="inicio">
    <h2>Atuação</h2>
    <p class="muted">
      Conteúdo institucional e informativo sobre temas de Direito Penal e Processo Penal, com publicações voltadas à atualização e reflexão jurídica.
    </p>

    <div class="btns">
      <a class="btn btn--solid" href="blog/">Ver blog</a>
      <a class="btn" href="#contato">Contato</a>
      <a class="btn" id="newPostBtn" href="#" rel="nofollow">Novo post (painel)</a>
    </div>
  </section>

  <section>
    <h2>Últimas publicações</h2>
    <p class="muted">As postagens abaixo são carregadas automaticamente a partir do GitHub (Issues com label <b>post</b>).</p>

    <div id="latest" class="grid"></div>
    <p id="empty" class="muted" style="display:none;">Ainda não há posts publicados.</p>
  </section>

  <section id="contato">
    <h2>Contato</h2>
    <p><b>E-mail:</b> <a href="mailto:valtermarianoadvocacia.adv@gmail.com" style="color:var(--ouro); text-decoration:none;">valtermarianoadvocacia.adv@gmail.com</a></p>
    <p><b>WhatsApp:</b> <a href="https://wa.me/5561996057330" style="color:var(--ouro); text-decoration:none;">(61) 99605-7330</a></p>
    <p class="muted"><b>Localidade:</b> Brasília/DF. Atendimento presencial e remoto, mediante agendamento.</p>
  </section>
</main>

<footer>
  <div class="wrap">
    <div class="legal">
      Conteúdo meramente informativo, sem promessa de resultados e sem substituição de consulta jurídica individualizada.
    </div>
  </div>
</footer>

<script>
  // === CONFIG DO SEU REPO ===
  const OWNER = "valtermarianoadvocacia";
  const REPO  = "valtermarianoadvocacia.github.io";
  const LABEL_PUBLICAR = "post"; // label que marca o que é "publicado"

  // Botão "Novo post" abre a interface do GitHub para criar uma Issue já com label
  document.getElementById("newPostBtn").href =
    `https://github.com/${OWNER}/${REPO}/issues/new?labels=${encodeURIComponent(LABEL_PUBLICAR)}`;

  function fmtDate(iso){
    try{
      const d = new Date(iso);
      return d.toLocaleDateString("pt-BR");
    }catch(e){ return ""; }
  }

  function escapeHtml(s){
    return (s || "").replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#039;'}[m]));
  }

  function excerptFrom(body){
    const txt = (body || "").replace(/```[\s\S]*?```/g, "").replace(/[#>*_\-\[\]\(\)!`]/g, "").trim();
    return txt.length > 160 ? txt.slice(0,160) + "…" : txt;
  }

  function labelsToTags(labels){
    return (labels || [])
      .map(l => l && l.name)
      .filter(n => n && n.toLowerCase() !== LABEL_PUBLICAR)
      .slice(0,6);
  }

  async function loadLatest(){
    const url = `https://api.github.com/repos/${OWNER}/${REPO}/issues?state=open&labels=${encodeURIComponent(LABEL_PUBLICAR)}&per_page=6&sort=created&direction=desc`;
    const r = await fetch(url, { headers: { "Accept": "application/vnd.github+json" }});
    if(!r.ok) throw new Error("Falha ao carregar posts");
    const issues = await r.json();

    const box = document.getElementById("latest");
    const empty = document.getElementById("empty");

    if(!issues || issues.length === 0){
      empty.style.display = "block";
      return;
    }

    box.innerHTML = issues.map(it => {
      const tags = labelsToTags(it.labels);
      const tagsHtml = tags.length ? `<div class="tags">${tags.map(t => `<span class="tag">${escapeHtml(t)}</span>`).join("")}</div>` : "";
      return `
        <article class="card">
          <div class="date">${fmtDate(it.created_at)}</div>
          <div class="title"><a href="blog/post.html?n=${it.number}" style="text-decoration:none;">${escapeHtml(it.title)}</a></div>
          <p class="excerpt">${escapeHtml(excerptFrom(it.body))}</p>
          ${tagsHtml}
        </article>
      `;
    }).join("");
  }

  loadLatest().catch(() => {
    document.getElementById("empty").style.display = "block";
  });
</script>
</body>
</html>
